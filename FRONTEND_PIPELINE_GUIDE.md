# 前端流水線控制使用指南

## 🚀 功能概述

前端流水線控制中心提供了一個完整的圖形界面來管理和監控新聞分析流水線的執行。

## 📋 主要功能

### 1. 流水線控制
- **啟動流水線**：配置參數並啟動完整的新聞分析流水線
- **停止流水線**：手動停止正在運行的流水線
- **實時監控**：實時顯示執行進度、狀態和日誌

### 2. 參數配置
- **基本設置**：
  - 跳過新聞攝取：使用現有新聞數據
  - 處理時間範圍：設定處理最近 N 小時的新聞
  - 跳過投資建議：僅執行信號分析部分

- **高級設置**：
  - 新聞攝取數量：控制每個 RSS 源的新聞數量
  - AI 模型選擇：選擇用於新聞分析的 AI 模型
  - 半衰期設置：控制新聞分數的時間衰減

### 3. 實時狀態顯示
- **狀態卡片**：顯示當前狀態、進度、步驟和耗時
- **進度條**：視覺化顯示執行進度
- **執行日誌**：實時顯示詳細的執行日誌
- **錯誤提示**：當執行出錯時顯示錯誤信息

### 4. 結果展示
- **研究匹配信號**：顯示基於研究報告匹配的信號分析結果
- **新聞分數信號**：顯示基於 AI 新聞分析的信號結果
- **投資建議**：顯示生成的投資建議和評分排名

## 🎯 使用步驟

### 1. 訪問流水線控制中心
1. 打開前端應用（通常是 http://localhost:3000）
2. 點擊 "🚀 流水線控制" 標籤頁

### 2. 配置流水線參數
1. 在 "流水線配置" 區域設置基本參數：
   - 選擇是否跳過新聞攝取
   - 設定處理時間範圍（建議 1-24 小時）
   - 選擇是否跳過投資建議生成

2. 點擊 "顯示高級選項" 可以配置更多參數：
   - 新聞攝取數量
   - AI 模型選擇
   - 半衰期設置

### 3. 啟動流水線
1. 確認配置無誤後，點擊 "🚀 啟動流水線" 按鈕
2. 系統將開始執行流水線，狀態會實時更新

### 4. 監控執行過程
1. 觀察狀態卡片中的進度變化
2. 查看進度條的實時更新
3. 關注執行日誌中的詳細信息
4. 如有錯誤，會在錯誤區域顯示

### 5. 查看結果
1. 流水線完成後，結果會自動顯示在下方
2. 可以查看：
   - 研究匹配信號的統計和排名
   - 新聞分數信號的分析結果
   - 投資建議的詳細評分

## ⚙️ 推薦配置

### 快速測試
```
- 跳過新聞攝取: ✓
- 處理時間範圍: 1 小時
- 跳過投資建議: ✓
- AI 模型: deepseek-reasoner
```

### 完整分析
```
- 跳過新聞攝取: ✗
- 新聞攝取數量: 20-40
- 處理時間範圍: 12-24 小時
- 跳過投資建議: ✗
- AI 模型: deepseek-reasoner
- 半衰期: 72 小時
```

### 僅新聞分析
```
- 跳過新聞攝取: ✗
- 新聞攝取數量: 10-20
- 處理時間範圍: 6-12 小時
- 跳過投資建議: ✓
- AI 模型: deepseek-reasoner
```

## 🔧 故障排除

### 1. 流水線啟動失敗
- 檢查後端服務是否正常運行
- 確認 DeepSeek API 密鑰已正確配置
- 查看瀏覽器控制台是否有錯誤信息

### 2. 執行過程中出錯
- 查看執行日誌中的錯誤信息
- 常見錯誤：
  - DeepSeek API 超時：減少處理時間範圍
  - 數據庫連接問題：檢查數據庫服務
  - 內存不足：減少處理批次大小

### 3. 結果顯示不完整
- 點擊 "🔄 刷新結果" 按鈕重新載入
- 確認流水線已完全執行完成
- 檢查是否有步驟執行失敗

### 4. 前端響應慢
- 流水線執行時會有大量實時更新
- 可以關閉瀏覽器的其他標籤頁
- 清除瀏覽器緩存後重新載入

## 📊 性能建議

### 處理時間範圍選擇
- **1-6 小時**：適合快速測試和開發
- **12-24 小時**：適合日常分析
- **48-168 小時**：適合週期性深度分析

### 新聞攝取數量
- **10-20 條**：快速測試
- **40-60 條**：標準分析
- **100+ 條**：深度分析（需要更多時間）

### AI 模型選擇
- **deepseek-reasoner**：推薦，分析質量高
- **deepseek-chat**：備選，速度較快

## 🔄 自動化建議

### 定期執行
- 建議每日執行一次完整流水線
- 可在系統負載較低時（如凌晨）執行
- 使用較長的處理時間範圍（24-48 小時）

### 實時監控
- 設置流水線執行失敗的通知
- 監控 API 響應時間和錯誤率
- 定期檢查結果數據的質量和完整性
